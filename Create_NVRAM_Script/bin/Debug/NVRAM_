0x10000 userOpen
: put start: userWrite ;
put : cal3D
put calmode 1 set drop
put 300 delay
put calCommand cal_start set drop
put ." $Key captures point, ESC to end" cr
put begin
put key 27 = 0=
put while
put begin
put ?key 0=
put while
put roll di@ pitch di@ yaw di@
put ." $YAW= " 0 2 rot ff. ."  PITCH= " 0 2 rot ff.
put ."  ROLL= " 0 2 rot ff. ." \r\n"
put 250 delay
put repeat
put key drop
put calCommand cal_capture set drop
put 300 delay
put calNumPoints di@
put ." $calNumPoints=". ." \r\n"
put repeat
put calCommand cal_end_capture set drop
put 300 delay
put ." $Error settling, Press key to end" cr
put begin
put ?key 0=
put while
put magErr di@
put ." $magErr= " 0 6 rot ff. ." \r\n"
put 250 delay
put repeat
put 300 delay
put calCommand cal_end set drop
put 300 delay
put calmode 0 set drop
put 300 delay
put ." $Score: " magFieldCalErr di@ 0 3 rot ff. ." \r\n" cr
put ;
userClose
